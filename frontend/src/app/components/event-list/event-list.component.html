<div class="container">
  <h2>Upcoming Events</h2>

  <div class="filters-row">
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Search events by name or category</mat-label>
      <input matInput [(ngModel)]="searchTerm" (keyup)="filterEvents()" placeholder="Ex. music, workshop">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Filter by Venue</mat-label>
      <input matInput [(ngModel)]="venueFilter" (keyup)="filterEvents()" placeholder="Ex. New York">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Filter by Date</mat-label>
      <input matInput [matDatepicker]="picker" [(ngModel)]="dateFilter" (dateChange)="filterEvents()">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
  </div>

  <div class="event-grid">
    <mat-card *ngFor="let event of filteredEvents" class="event-card">
      <mat-card-header>
        <mat-card-title>{{ event.name }}</mat-card-title>
        <mat-card-subtitle>{{ event.date_time | date:'medium' }}</mat-card-subtitle>
      </mat-card-header>
      <img mat-card-image src="{{ event.image_url || 'https://material.angular.io/assets/img/examples/shiba2.jpg' }}"
        alt="Event image">
      <mat-card-content>
        <p><strong>Venue:</strong> {{ event.venue }}</p>
        <p><strong>Category:</strong> {{ event.category }}</p>
        <p><strong>Available Seats:</strong> {{ event.capacity - (event.tickets_sold || 0) }} / {{ event.capacity }}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" [routerLink]="['/events', event.id]">DETAILS</button>
        <button mat-raised-button color="accent" [routerLink]="['/events', event.id, 'book']">BOOK NOW</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>