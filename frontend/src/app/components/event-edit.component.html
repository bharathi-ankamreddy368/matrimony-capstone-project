<div class="event-form-container">
    <h2>Edit Event</h2>
    <mat-card>
        <form [formGroup]="form" (ngSubmit)="save()">
            <div class="form-row">
                <mat-form-field appearance="outline">
                    <mat-label>Event Name</mat-label>
                    <input matInput formControlName="name" required>
                    <mat-error *ngIf="form.get('name')?.hasError('required')">Name is required</mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Category</mat-label>
                    <mat-select formControlName="category">
                        <mat-option value="Music">Music</mat-option>
                        <mat-option value="Workshop">Workshop</mat-option>
                        <mat-option value="Conference">Conference</mat-option>
                        <mat-option value="Meetup">Meetup</mat-option>
                        <mat-option value="Other">Other</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description" rows="3"></textarea>
            </mat-form-field>

            <div class="form-row">
                <mat-form-field appearance="outline">
                    <mat-label>Venue</mat-label>
                    <input matInput formControlName="venue" required>
                    <mat-error *ngIf="form.get('venue')?.hasError('required')">Venue is required</mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Date & Time</mat-label>
                    <input matInput type="datetime-local" formControlName="date_time" required>
                    <mat-error *ngIf="form.get('date_time')?.hasError('required')">Date is required</mat-error>
                </mat-form-field>
            </div>

            <div class="form-row">
                <mat-form-field appearance="outline">
                    <mat-label>Capacity</mat-label>
                    <input matInput type="number" formControlName="capacity" min="1" required>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Ticket Price</mat-label>
                    <input matInput type="number" formControlName="ticket_price" min="0">
                    <span matPrefix>$&nbsp;</span>
                </mat-form-field>
            </div>

            <div class="file-upload">
                <label>Event Image (Optional)</label>
                <input type="file" (change)="onFile($event)" accept="image/*">
                <img *ngIf="previewUrl" [src]="previewUrl" class="preview-img">
            </div>

            <div *ngIf="uploadProgress !== null">
                <mat-progress-bar mode="determinate" [value]="uploadProgress"></mat-progress-bar>
            </div>

            <div class="actions">
                <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
                    Save Changes
                </button>
                <button mat-button type="button" (click)="cancel()">Cancel</button>
            </div>
        </form>
    </mat-card>
</div>